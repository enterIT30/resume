//! BURGER-MENU ===================================================================================
const iconMenu=document.querySelector(".icon-menu"),menuBody=document.querySelector(".menu__body"),arrowMenu=document.querySelector(".menu__header .arrow");arrowMenu.addEventListener("click",(()=>{menuBody.classList.toggle("open-menu"),iconMenu.classList.toggle("open-menu")})),document.addEventListener("keydown",(e=>{"Escape"==e.code&&(menuBody.classList.remove("open-menu"),iconMenu.classList.remove("open-menu"))})),document.addEventListener("click",(e=>{e.target.closest(".icon-menu")?(menuBody.classList.toggle("open-menu"),iconMenu.classList.toggle("open-menu")):null==e.target.closest(".menu__body")&&menuBody.classList.contains("open-menu")&&(console.log(e.target),menuBody.classList.toggle("open-menu"),iconMenu.classList.toggle("open-menu"))}));
//! SPOLLER ==================================================================================
const spollersArray=document.querySelectorAll("[data-spollers]");if(spollersArray.length>0){const e=Array.from(spollersArray).filter((function(e,t,o){return!e.dataset.spollers.split(",")[0]}));e.length>0&&initSpollers(e);const t=Array.from(spollersArray).filter((function(e,t,o){return e.dataset.spollers.split(",")[0]}));if(t.length>0){const e=[];t.forEach((t=>{const o={},l=t.dataset.spollers.split(",");o.value=l[0],o.type=l[1]?l[1].trim():"max",o.item=t,e.push(o)}));let o=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));o=o.filter((function(e,t,o){return o.indexOf(e)===t})),o.forEach((t=>{const o=t.split(","),l=o[1],n=o[2],s=window.matchMedia(o[0]),r=e.filter((function(e){if(e.value===l&&e.type===n)return!0}));s.addListener((function(){initSpollers(r,s)})),initSpollers(r,s)}))}function initSpollers(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_spoller-init"),initSpollerBody(e),e.addEventListener("click",setSpollerAction)):(e.classList.remove("_spoller-init"),initSpollerBody(e,!1),e.removeEventListener("click",setSpollerAction))}))}function initSpollerBody(e,t=!0){const o=e.querySelectorAll("[data-spoller]");o.length>0&&o.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_spoller-active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)}))}function setSpollerAction(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const o=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),l=o.closest("[data-spollers]"),n=!!l.hasAttribute("data-one-spoller");l.querySelectorAll("._slide").length||(n&&!o.classList.contains("_spoller-active")&&hideSpollersBody(l),o.classList.toggle("_spoller-active"),_slideToggle(o.nextElementSibling,500)),e.preventDefault()}}function hideSpollersBody(e){const t=e.querySelector("[data-spoller]._spoller-active");t&&(t.classList.remove("_spoller-active"),_slideUp(t.nextElementSibling,500))}}let _slideUp=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t))},_slideDown=(e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let o=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t)}},_slideToggle=(e,t=500)=>e.hidden?_slideDown(e,t):_slideUp(e,t);
//! POPUP ==================================================================================
const popup=document.querySelector(".popup.popup-thaks"),btnClose=document.querySelector(".popup__close");function popupOpen(){popup.classList.add("popup-active")}function popupClose(){popup.classList.remove("popup-active")}function showModalByScroll(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight-1&&(popupOpen(),window.removeEventListener("scroll",showModalByScroll))}btnClose.addEventListener("click",(()=>{popupClose()})),popup.addEventListener("click",(e=>{e.target===popup&&popupClose()})),window.addEventListener("scroll",showModalByScroll);
//! GALLERY ==================================================================================
const galleryEl=document.querySelectorAll("[data-gallery]"),pageOverlay=document.createElement("div");function disabledScroll(){document.body.scrollPosition=window.scrollY,document.body.style.cssText=`\n    overflow: hidden;\n    top: -${document.body.scrollPosition}px; //!!!\n    left: 0;\n    height: 100vh;\n    `}function enabledScroll(){document.body.style.cssText="position: relative",window.scroll({top:document.body.scrollPosition})}
//! HEADER, ПОСЛЕ ПРОКРУТКИ ГЛАВНОЙ СТРАНИЦЫ
pageOverlay.classList.add("page__overlay"),galleryEl.forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.closest(".card-photo");if(t){disabledScroll(),document.body.append(pageOverlay);const e=document.createElement("picture");e.style.cssText="\n        position: absolute;\n        top: 0px;\n        right: 50%;\n        transform: translateX(50%);\n        width: 90%;\n        max-width: 1240px;\n        display: flex;\n      ",e.innerHTML=`\n\n        <img src="${t.dataset.fullImage}.jpg" alt="">\n      `,pageOverlay.append(e)}}))})),pageOverlay.addEventListener("click",(e=>{enabledScroll(),pageOverlay.remove(),pageOverlay.textContent=""})),window.addEventListener("scroll",(()=>{const e=document.querySelector(".main-page"),t=document.querySelector("header.header"),o=e.scrollHeight;window.screen.height;window.pageYOffset>=o?t.classList.add("_fix"):t.classList.remove("_fix")}));
//! ПРОКРУТКА ПРИ КЛИКЕ
const menuLinks=document.querySelectorAll("[data-goto]");if(menuLinks.length>0){function onMenuLinkClick(e){const t=e.target;if(console.log(t.dataset.goto),t.dataset.goto&&document.querySelector(t.dataset.goto)){const o=document.querySelector(t.dataset.goto);console.log(o);const l=o.getBoundingClientRect().top+pageYOffset;console.log(l),iconMenu.classList.contains("open-menu")&&(iconMenu.classList.remove("open-menu"),menuBody.classList.remove("open-menu")),window.scrollTo({top:l,behavior:"smooth"}),e.preventDefault()}}menuLinks.forEach((e=>{e.addEventListener("click",onMenuLinkClick)}))}document.querySelector(".skills-card")&&window.screen.width<768&&new Swiper(".skills-card",{observer:!0,observeParents:!0,slidesPerView:1,spaceBetween:10,slidesPerGroup:1,watchOverflow:!0,speed:800,parallax:!0,freeMode:!0,autoplay:{delay:2e3,disableOnInteraction:!1},simulateTouch:!0,touchRatio:1,toushAngle:45,grabCursor:!0,keyboard:{enabled:!0,onlyInViewport:!0},scrollbar:{el:".swiper-scrollbar",draggable:!0},breakpoints:{320:{slidesPerView:3},400:{slidesPerView:4},700:{slidesPerView:5},768:{slidesPerView:0}}});